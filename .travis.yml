dist:     xenial
sudo:     required

language: c

os: linux

compiler: gcc

env:
  global:
  #  - CODECOV_TOKEN="a659bbeb-783e-4906-8ca9-a66b83df66af"

install:
  - sudo apt-get update
  - sudo apt-get install valgrind
  - sudo apt-get install libstdc++6
  - sudo apt-get install cmake
  - sudo apt-get install lcov
  #  - sudo apt-get install gcov
  #  - sudo apt-get install gcovr
  - sudo apt-get install clang
  - sudo apt-get install clang-format

before_script:

  - clang-format -i -style=Google *.h *.c

script:

  - cmake . #-fprofile-arcs -ftest-coverage .
  - cmake --build .
  #- gcovr -r . #so here i can see test summary on travis site
  #    - ctest .
  - valgrind --tool=memcheck --gen-suppressions=all --leak-check=full --leak-resolution=med --track-origins=yes --vgdb=no ./project < in.txt